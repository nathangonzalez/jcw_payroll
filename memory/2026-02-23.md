# 2026-02-23

## Session Start (9:28 AM)
- Read SOUL.md, USER.md, memory files per AGENTS.md protocol
- Continuing from previous session: VS Code Tunnel setup on clawbot-ops

## VS Code Tunnel Status
- `code-tunnel.service` is **active and running** (PID 91810, since 14:26 UTC)
- Tunnel URL: `https://vscode.dev/tunnel/jcw-dev-server`
- GitHub auth is good — no re-auth needed
- Repos present at `/home/nathan/dev/repos/{jcw_payroll, agent-ops}`
- **No client has connected yet** — `.vscode-server/` directory doesn't exist, meaning extensions need to be installed on first connect
- Cline (`saoudrizwan.claude-dev-3.66.0`) is installed in **code-server** (port 8080) but NOT in the tunnel yet

## Tunnel Fix (11:00 AM)
- Nate tried to connect → "Timeout connecting to relay" error
- Root cause: tunnel had been running since yesterday 14:26 UTC with stale relay connection
- Restarted `code-tunnel.service` → new PID 93685, fresh relay connection
- Verified 2 ESTABLISHED TCP connections to Microsoft relay (20.120.56.11:443)
- Tunnel URL confirmed: `https://vscode.dev/tunnel/jcw-dev-server`

## Systems Audit & Model Strategy (11:07 AM)
- Nate asked for high-level summary — losing track of all the pilots
- Created `STATUS.md` — comprehensive inventory of all 7 active systems
- Diagnosed OpenClaw error: `API rate limit reached` on gpt-4.1 in tight retry loop, no backoff
  - OpenClaw v2026.2.15, latest is v2026.2.21-2
  - Fix: update OpenClaw, add backoff, configure fallback model
  - `group:memory` warning = memory plugin not enabled (non-critical)

### Revised Model Priority (updated .clinerules)
1. OpenAI GPT-4.1 / Copilot — subscription, free per-token, has rate limits
2. Cline M2 — free, for routine tasks
3. Gemini Flash — cheap fallback
4. Gemini 2.5 Pro — moderate cost, large context
5. Anthropic Claude Sonnet — LAST RESORT ($3/1M input)

Key insight: Anthropic moved from #2 to #5. Subscription models first, free models second, pay-per-token = last resort.

### Recommended Consolidation
- **Primary:** VS Code Tunnel + Cline on VM (24/7)
- **Secondary:** Slack bot for approvals/monitoring
- **Pause OpenClaw** until rate limit strategy sorted
- **Local Cline** = ad-hoc only

## TCP Keepalive Fix for Tunnel (2:07 PM)
- **Root cause found**: TCP keepalive was 7200s (2 hours), but GCP Cloud NAT drops idle connections after 300s (5 min)
- Websocket to Microsoft relay goes idle → NAT kills it → tunnel doesn't detect for 2 hours → "Timeout connecting to relay"
- **Fix**: Set `tcp_keepalive_time=60` (was 7200), `tcp_keepalive_intvl=10`, `tcp_keepalive_probes=6`
- Persisted to `/etc/sysctl.d/99-keepalive.conf`
- Tunnel restarted, 2 active relay connections confirmed
- This should prevent the idle connection drops

## OpenClaw Updated (1:00 PM)
- Updated OpenClaw v2026.2.15 → v2026.2.22-2 via `npm i -g openclaw@latest`
- `openclaw doctor` found stale gateway token — needs user to accept config update + restart

## Next Steps
1. Nate: try tunnel again (https://vscode.dev/tunnel/jcw-dev-server) — should be stable now
2. In OpenClaw terminal: answer Yes to gateway config update, then `openclaw gateway restart`
3. Install Cline in tunnel, configure with OpenAI/Copilot
